(this.webpackJsonpdbmanager=this.webpackJsonpdbmanager||[]).push([[0],{191:function(e,t,n){},196:function(e,t,n){},264:function(e,t,n){},273:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),s=n(46),r=n.n(s),c=(n(191),n(285)),i=n(181),l=n(38),d=function(){return-1!==navigator.userAgent.toLowerCase().indexOf(" electron/")},u=n(9),h=n(15),j=function(e){var t=d()?Object(l.b)():Object(l.a)(),n=o.a.useState(null),a=Object(u.a)(n,2),s=a[0],r=a[1];return o.a.useEffect((function(){fetch("".concat("http://localhost:8888/api/main","/get-table-list")).then((function(e){return e.json()})).then((function(t){var n=t.data.map((function(e){return e.TABLE_NAME}));r(n),e.handleTab(n[0])}),(function(e){console.log(e),i.a.error({message:"Connect Error",description:"Server has got some problems.",placement:"topRight"}),localStorage.removeItem("user"),localStorage.removeItem("admin"),t.push("/login");var n=window.location.href;window.location.href=n}))}),[]),Object(h.jsx)("div",{className:"tabs",children:null===s||void 0===s?void 0:s.map((function(t,n){return Object(h.jsx)("div",{className:t===e.nowTab?"tab activeTab":"tab",onClick:function(){return e.handleTab(t)},children:t},n)}))})},p=n(11),b=n(59),m=n(290),g=n(178),f=n(282),O=n(283),w=n(284),x=function(e){var t=o.a.useRef(),n=o.a.useState([]),a=Object(u.a)(n,2),s=a[0],r=a[1],c=o.a.useCallback((function(){t.current.hideFileMenuItems(["File"],!0)}),[t]);return o.a.useEffect((function(){e.nowTab&&(t.current.showSpinner(),fetch("".concat("http://localhost:8888/api/main","/get-content"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({table:e.nowTab})}).then((function(e){return e.json()})).then((function(e){if("success"===e.message){var n=t.current.getActiveSheet().usedRange.rowIndex,a=t.current.getActiveSheet().usedRange.colIndex;if(n){var o,s="ABCDEFGHIJKLMNOPQRSTUVWXYZ";if(a<26)o=s[a];else{var c=parseInt(a/26),i=a%26;o="".concat(s[c-1]).concat(s[i])}t.current.clear({type:"Clear All",range:"A1:".concat(o).concat(n+1)}),t.current.selectRange(Object(g.b)([1,0,1,0]))}r(e.data),t.current.hideSpinner()}})))}),[e.nowTab]),Object(h.jsxs)(o.a.Fragment,{children:[e.nowTab&&Object(h.jsx)(b.a,{type:"primary",className:"save",onClick:function(){t.current.showSpinner();var n=t.current.getActiveSheet().usedRange.rowIndex,a=t.current.getActiveSheet().usedRange.colIndex,o=[],s=[],r=0;t.current.getData(Object(g.b)([0,0,n,a])).then((function(n){n.forEach((function(e,t){r>a&&(o=[].concat(Object(p.a)(o),[s]),s=[],r=0),s=[].concat(Object(p.a)(s),[e.value]),r++})),fetch("".concat("http://localhost:8888/api/main","/save-content"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({table:e.nowTab,data:o})}).then((function(e){return e.json()})).then((function(e){"success"===e.message&&t.current.hideSpinner()}))}))},icon:Object(h.jsx)(m.a,{}),children:"Save"}),Object(h.jsx)(f.a,{showSheetTabs:!1,ref:t,created:c,children:Object(h.jsx)(O.b,{children:Object(h.jsx)(O.a,{frozenRows:1,children:Object(h.jsx)(w.b,{children:Object(h.jsx)(w.a,{dataSource:s})})})})})]})},v=n(289),y=n(291),S=n(292),C=n(293),I=n(294),k=function(){var e=d()?Object(l.b)():Object(l.a)(),t=o.a.useState(window.innerWidth),n=Object(u.a)(t,2),a=n[0],s=n[1];window.addEventListener("resize",(function(){s(window.innerWidth)}));var r=function(){e.push("/");var t=window.location.href;window.location.href=t};return Object(h.jsxs)("div",{className:"header",children:[Object(h.jsx)("a",{onClick:r,children:Object(h.jsx)("img",{src:"logo.png",alt:"logo",width:"100",style:{marginRight:"20px"}})}),Object(h.jsxs)("div",{className:"header-content",children:[a>961&&Object(h.jsxs)("p",{className:"header-text",children:["Hello, ",localStorage.getItem("user")," !"]}),Object(h.jsxs)(v.b,{wrap:!0,style:{justifyContent:"center"},children:[Object(h.jsxs)(v.b,{children:[Object(h.jsx)(b.a,{type:"text",icon:Object(h.jsx)(y.a,{}),style:{color:"#0044aa",fontWeight:"bold"},onClick:r,children:"Home"}),"true"===localStorage.getItem("admin")?Object(h.jsx)(o.a.Fragment,{children:Object(h.jsx)(b.a,{type:"text",icon:Object(h.jsx)(S.a,{}),style:{color:"#0044aa",fontWeight:"bold"},onClick:function(){e.push("/users");var t=window.location.href;window.location.href=t},children:"User Manage"})}):null]}),Object(h.jsxs)(v.b,{children:[Object(h.jsx)(b.a,{type:"text",icon:Object(h.jsx)(C.a,{}),style:{color:"#0044aa",fontWeight:"bold"},onClick:function(){e.push("/change-password");var t=window.location.href;window.location.href=t},children:"Change password"}),Object(h.jsx)(b.a,{type:"text",icon:Object(h.jsx)(I.a,{}),style:{color:"#0044aa",fontWeight:"bold"},onClick:function(){localStorage.removeItem("user"),localStorage.removeItem("admin"),e.push("/login");var t=window.location.href;window.location.href=t},children:"Log Out"})]})]})]})]})};n(196);var T=function(){var e=d()?Object(l.b)():Object(l.a)(),t=o.a.useState(null),n=Object(u.a)(t,2),a=n[0],s=n[1];return o.a.useEffect((function(){if(!localStorage.getItem("user")){e.push("/login");var t=window.location.href;window.location.href=t}}),[]),Object(h.jsxs)("div",{children:[Object(h.jsx)(k,{}),Object(h.jsx)(j,{handleTab:function(e){s(e)},nowTab:a}),Object(h.jsx)(x,{nowTab:a})]})},N=n(4),E=n(287),F=n(179);var P=function(){var e=E.a.useForm(),t=Object(u.a)(e,1)[0];return Object(h.jsxs)(E.a,{form:t,labelCol:{span:9},wrapperCol:{span:9},initialValues:{remember:!0},onFinish:function(e){e.newPassword!==e.confirmPassword?i.a.warning({message:"Input Error",description:"Confirm Password must be same with new password.",placement:"topRight"}):fetch("".concat("http://localhost:8888/api/main","/change-password"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(N.a)(Object(N.a)({},e),{},{user:localStorage.getItem("user")}))}).then((function(e){return e.json()})).then((function(e){"Change Success"===e.message?(i.a.info({message:e.message,description:e.description,placement:"topRight"}),t.resetFields()):i.a.warning({message:e.message,description:e.description,placement:"topRight"})}))},onFinishFailed:function(e){console.log("Failed:",e)},autoComplete:"off",style:{padding:"75px 20px 50px 20px",backgroundColor:"white",boxShadow:"2px 4px 8px lightgray"},children:[Object(h.jsx)(E.a.Item,{label:"Old Password",name:"oldPassword",rules:[{required:!0,message:"Please input your old password!"}],children:Object(h.jsx)(F.a.Password,{size:"large"})}),Object(h.jsx)(E.a.Item,{label:"New Password",name:"newPassword",rules:[{required:!0,message:"Please input your new password!"}],children:Object(h.jsx)(F.a.Password,{size:"large"})}),Object(h.jsx)(E.a.Item,{label:"Confirm Password",name:"confirmPassword",rules:[{required:!0,message:"Please input your confirm password!"}],children:Object(h.jsx)(F.a.Password,{size:"large"})}),Object(h.jsx)(E.a.Item,{wrapperCol:{offset:9,span:9},children:Object(h.jsx)(b.a,{type:"primary",htmlType:"submit",children:"Submit"})})]})};var R=function(){var e=d()?Object(l.b)():Object(l.a)();return o.a.useEffect((function(){if(!localStorage.getItem("user")){e.push("/login");var t=window.location.href;window.location.href=t}}),[]),Object(h.jsxs)(o.a.Fragment,{children:[Object(h.jsx)(k,{}),Object(h.jsx)(P,{})]})},A=n(20),L=n(21),z=n(22),D=n(23),J=(n(264),d()?Object(l.b)():Object(l.a)()),_=function(e){Object(z.a)(n,e);var t=Object(D.a)(n);function n(e){var a;return Object(A.a)(this,n),(a=t.call(this,e)).state={mode:a.props.mode},a}return Object(L.a)(n,[{key:"toggleMode",value:function(){var e="login"===this.state.mode?"signup":"login";this.setState({mode:e})}},{key:"onFinish",value:function(e){e.preventDefault();var t=e.target[0].value,n=e.target[1].value,a=e.target[2].value,o=e.target[3].value,s=e.target[4].value,r=e.target[5].value;"login"===this.state.mode?t&&n?fetch("".concat("http://localhost:8888/api/main","/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:n})}).then((function(e){return e.json()})).then((function(e){if("Log In Success"===e.message){i.a.info({message:e.message,description:e.description,placement:"topRight"}),localStorage.setItem("user",t),localStorage.setItem("admin",e.admin),J.push("/");var n=window.location.href;window.location.href=n}else i.a.warning({message:e.message,description:e.description,placement:"topRight"})}),(function(e){console.log(e),i.a.error({message:"Log In Error",description:"Server has got some problems.",placement:"topRight"})})):i.a.warning({message:"Input Error",description:"All field are required.",placement:"topRight"}):a&&o&&s&&s===r?fetch("".concat("http://localhost:8888/api/main","/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullname:a,email:o,createpassword:s})}).then((function(e){return e.json()})).then((function(e){if("Sign Up Success"===e.message){i.a.info({message:e.message,description:e.description,placement:"topRight"});for(var t=document.getElementsByTagName("input"),n=0;n<t.length;n++)t[n].value=""}else i.a.warning({message:e.message,description:e.description,placement:"topRight"})}),(function(e){console.log(e),i.a.error({message:"Sign Up Error",description:"Server has got some problem.",placement:"topRight"})})):i.a.warning({message:"Input Error",description:s!==r?"Please confirm the password.":"All fields are required.",placement:"topRight"})}},{key:"render",value:function(){return Object(h.jsxs)(o.a.Fragment,{children:[Object(h.jsx)("div",{className:"form-block-wrapper form-block-wrapper--is-".concat(this.state.mode)}),Object(h.jsxs)("section",{className:"form-block form-block--is-".concat(this.state.mode),children:[Object(h.jsxs)("header",{className:"form-block__header",children:[Object(h.jsx)("h1",{children:"login"===this.state.mode?"Welcome !":"Sign up"}),Object(h.jsxs)("div",{className:"form-block__toggle-block",children:[Object(h.jsxs)("span",{children:["login"===this.state.mode?"Don't":"Already"," have an account? Click here \u2192"]}),Object(h.jsx)("input",{id:"form-toggler",type:"checkbox",onClick:this.toggleMode.bind(this)}),Object(h.jsx)("label",{htmlFor:"form-toggler"})]})]}),Object(h.jsx)(W,{mode:this.state.mode,onSubmit:this.onFinish.bind(this)})]})]})}}]),n}(o.a.Component),W=function(e){Object(z.a)(n,e);var t=Object(D.a)(n);function n(e){return Object(A.a)(this,n),t.call(this,e)}return Object(L.a)(n,[{key:"render",value:function(){return Object(h.jsxs)("form",{onSubmit:this.props.onSubmit,children:[Object(h.jsxs)("div",{className:"form-block__input-wrapper",children:[Object(h.jsxs)("div",{className:"form-group form-group--login",children:[Object(h.jsx)(M,{type:"text",id:"username",label:"user name",disabled:"signup"===this.props.mode}),Object(h.jsx)(M,{type:"password",id:"password",label:"password",disabled:"signup"===this.props.mode})]}),Object(h.jsxs)("div",{className:"form-group form-group--signup",children:[Object(h.jsx)(M,{type:"text",id:"fullname",label:"full name",disabled:"login"===this.props.mode}),Object(h.jsx)(M,{type:"email",id:"email",label:"email",disabled:"login"===this.props.mode}),Object(h.jsx)(M,{type:"password",id:"createpassword",label:"password",disabled:"login"===this.props.mode}),Object(h.jsx)(M,{type:"password",id:"repeatpassword",label:"repeat password",disabled:"login"===this.props.mode})]})]}),Object(h.jsx)("button",{className:"button button--primary full-width",type:"submit",children:"login"===this.props.mode?"Log In":"Sign Up"})]})}}]),n}(o.a.Component),M=function(e){var t=e.id,n=e.type,a=e.label,o=e.disabled;return Object(h.jsx)("input",{className:"form-group__input",type:n,id:t,placeholder:a,disabled:o})},U=function(){return o.a.useEffect((function(){if(localStorage.getItem("user")){J.push("/");var e=window.location.href;window.location.href=e}}),[]),Object(h.jsxs)("div",{className:"login-container",children:[Object(h.jsx)("div",{className:"app"}),Object(h.jsx)(_,{mode:"login"})]})},B=n(288),q=n(286),H=n(108),K=n(295);var V=function(){var e=o.a.useState(!1),t=Object(u.a)(e,2),n=t[0],a=t[1],s=o.a.useState([]),r=Object(u.a)(s,2),c=r[0],i=r[1],l=o.a.useState(window.innerHeight-260),d=Object(u.a)(l,2),j=d[0],p=d[1],m=o.a.useState({current:1,pageSize:10,position:["bottomCenter","none"]}),g=Object(u.a)(m,2),f=g[0],O=g[1],w=function(){a(!0),fetch("".concat("http://localhost:8888/api/main","/get-users")).then((function(e){return e.json()})).then((function(e){"success"===e.message&&(i(e.data),a(!1))}))};o.a.useEffect((function(){w()}),[]);var x=function(e,t,n){return"number"===typeof e[n]&&"number"===typeof t[n]?e[n]-t[n]:"string"===typeof e[n]&&"string"===typeof t[n]?(e=e[n].toLowerCase())>(t=t[n].toLowerCase())?-1:t>e?1:0:0},y=function(e){return{filterDropdown:function(t){var n=t.setSelectedKeys,a=t.selectedKeys,o=t.confirm,s=t.clearFilters;return Object(h.jsxs)("div",{style:{padding:8},children:[Object(h.jsx)(F.a,{placeholder:"Search ".concat(e),value:a[0],onChange:function(e){return n(e.target.value?[e.target.value]:[])},onPressEnter:o,style:{marginBottom:8,display:"block"}}),Object(h.jsxs)(v.b,{children:[Object(h.jsx)(b.a,{type:"primary",onClick:o,icon:Object(h.jsx)(H.a,{}),size:"small",style:{width:90},children:"Search"}),Object(h.jsx)(b.a,{onClick:s,size:"small",style:{width:90},children:"Reset"}),Object(h.jsx)(b.a,{type:"link",size:"small",onClick:function(){o({closeDropdown:!1})},children:"Filter"})]})]})},filterIcon:function(e){return Object(h.jsx)(H.a,{style:{color:e?"#1890ff":void 0}})},onFilter:function(t,n){return n[e]?n[e].toString().toLowerCase().includes(t.toLowerCase()):""}}},S=[Object(N.a)({key:"username",title:"User Name",dataIndex:"username",sorter:function(e,t){return x(e,t,"username")}},y("username")),Object(N.a)({key:"email",title:"Email",dataIndex:"email",sorter:function(e,t){return x(e,t,"email")}},y("email")),{key:"action",title:"Action",dataIndex:"action",render:function(e,t){return Object(h.jsx)(B.a,{placement:"left",title:"Are you deleting this row?",onConfirm:function(){var e;e=t.id,a(!0),fetch("".concat("http://localhost:8888/api/main","/delete-user"),{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})}).then((function(e){return e.json()})).then((function(e){"success"===e.message&&w()}))},okText:"Yes",cancelText:"No",children:Object(h.jsx)(b.a,{type:"text",danger:!0,size:"small",icon:Object(h.jsx)(K.a,{}),children:"Delete"})})}}];return window.addEventListener("resize",(function(){p(window.innerHeight-260)})),Object(h.jsx)(o.a.Fragment,{children:Object(h.jsx)(q.a,{className:"user-table",bordered:!0,rowKey:"id",columns:S,dataSource:c,loading:n,pagination:f,onChange:function(e){O(e)},scroll:{y:j}})})};var Y=function(){var e=d()?Object(l.b)():Object(l.a)();return o.a.useEffect((function(){if(!localStorage.getItem("admin")){e.push("/");var t=window.location.href;window.location.href=t}}),[]),Object(h.jsxs)(o.a.Fragment,{children:[Object(h.jsx)(k,{}),Object(h.jsx)(V,{})]})};var G=function(){var e=d()?Object(l.b)():Object(l.a)();return o.a.useEffect((function(){fetch("".concat("http://localhost:8888/api/main","/create-base-tables")).then((function(e){return e.json()})).then((function(e){"success"===e.message&&console.log("Server is OK.")}),(function(e){console.log(e),i.a.error({message:"Connect Error",description:"Server has got some problems.",placement:"topRight"})}))}),[]),Object(h.jsx)("div",{className:"App",children:Object(h.jsx)(c.b,{history:e,children:Object(h.jsxs)(c.c,{children:[Object(h.jsx)(c.a,{path:"/",exact:!0,children:Object(h.jsx)(T,{})}),Object(h.jsx)(c.a,{path:"/users",exact:!0,children:Object(h.jsx)(Y,{})}),Object(h.jsx)(c.a,{path:"/change-password",exact:!0,children:Object(h.jsx)(R,{})}),Object(h.jsx)(c.a,{path:"/login",exact:!0,children:Object(h.jsx)(U,{})})]})})})},Q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,296)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),o(e),s(e),r(e)}))};r.a.render(Object(h.jsx)(o.a.StrictMode,{children:Object(h.jsx)(G,{})}),document.getElementById("root")),Q()}},[[273,1,2]]]);
//# sourceMappingURL=main.4c06f64a.chunk.js.map